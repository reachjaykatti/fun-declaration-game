<%- include('../partials/head', { title: `Edit Travel: ${match.name}` }) %>

<h1>Edit Travel: <%= match.name %> (<%= series.name %>)</h1>

<a class="btn btn-link js-back"
   href="<%= prevUrl || ('/admin/series/' + series.id + '/matches') %>"
   data-fallback="/admin/series/<%= series.id %>/matches">
   â† Back to Travels
</a>

<div class="card">
  <form method="POST" action="/admin/matches/<%= match.id %>/edit">
    
    <!-- âœ… Travel Name -->
    <div class="form-row">
      <label>Travel Name</label>
      <input type="text" name="name" value="<%= match.name || '' %>" required />
    </div>

    <!-- âœ… Type -->
    <div class="form-row">
      <label>Type</label>
      <input type="text" name="sport" value="<%= match.sport || '' %>" required />
    </div>

    <!-- âœ… Destinations -->
    <div class="form-row">
      <label>Destination A</label>
      <input type="text" name="team_a" value="<%= match.team_a || '' %>" required />
    </div>

    <div class="form-row">
      <label>Destination B</label>
      <input type="text" name="team_b" value="<%= match.team_b || '' %>" required />
    </div>

    <!-- âœ… Start Time -->
    <div class="form-row">
      <label>Start Time (IST)</label>
      <input
        type="text"
        name="start_time_ist"
        value="<%= match.start_time_ist || '' %>"
        placeholder="YYYY-MM-DD HH:mm"
      />
      <div class="text-muted" style="font-size:.9em;">
        Current (UTC): <code><%= match.start_time_utc || 'Not set' %></code> â€” Enter IST above to change.
      </div>
    </div>

    <!-- âœ… Cutoff -->
    <div class="form-row">
      <label>Cutoff Minutes Before</label>
      <input
        type="number"
        name="cutoff_minutes_before"
        value="<%= match.cutoff_minutes_before || 30 %>"
        min="0"
      />
    </div>

    <!-- âœ… Points -->
    <div class="form-row">
      <label>Travel Points</label>
      <input
        type="number"
        name="entry_points"
        value="<%= match.entry_points || 0 %>"
        min="0"
        step="1"
      />
    </div>

    <!-- âœ… Status -->
    <div class="form-row">
      <label>Status</label>
      <select name="status">
        <option value="scheduled" <%= match.status === 'scheduled' ? 'selected' : '' %>>Scheduled</option>
        <option value="completed" <%= match.status === 'completed' ? 'selected' : '' %>>Completed</option>
        <option value="cancelled" <%= match.status === 'cancelled' ? 'selected' : '' %>>Cancelled</option>
      </select>
    </div>

    <!-- âœ… Save / Cancel -->
    <div class="form-row" style="display:flex;gap:.5rem;">
      <button class="btn btn-primary" type="submit">ğŸ’¾ Save Changes</button>
      <a class="btn btn-link" href="/admin/series/<%= series.id %>/matches">Cancel</a>
    </div>
  </form>
</div>

<%- include('../partials/foot') %>
